(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{35:function(e,t,a){},69:function(e,t,a){"use strict";a.r(t);var r=a(0),s=a.n(r),n=a(20),c=a.n(n),o=a(10),i=a(11),l=a(13),u=a(12),h=a(14),d=a.n(h),p=a(3),m=a(4),j=a.n(m),b=a(15),f=a(16),O=a(6),v=Object(O.a)(),x=(a(35),a(1)),_=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,s=new Array(r),n=0;n<r;n++)s[n]=arguments[n];return(e=t.call.apply(t,[this].concat(s))).state={email:null,password:null,error:null},e.signInHandler=function(){var t=Object(b.a)(j.a.mark((function t(a){var r,s,n;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),r={headers:{"Content-Type":"application/json"}},t.prev=2,t.next=5,d.a.post("/api/auth/signin",{email:e.state.email,password:e.state.password},r);case 5:s=t.sent,n=s.data,localStorage.setItem("authtoken",n.token),v.push("/"),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(2),e.setState({error:t.t0.response.data.error});case 14:case"end":return t.stop()}}),t,null,[[2,11]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){localStorage.getItem("authToken")&&v.push("/")}},{key:"render",value:function(){var e=this;return Object(x.jsx)("div",{className:"auth-screen",children:Object(x.jsxs)("form",{className:"auth-screen__form",onSubmit:this.signInHandler,children:[Object(x.jsx)("h3",{className:"auth-screen__title",children:"Sign in"}),Object(x.jsxs)("div",{className:"auth-screen__form__element",children:[Object(x.jsx)("label",{htmlFor:"email",children:"Email:"}),Object(x.jsx)("input",{type:"email",required:!0,placeholder:"Enter email",name:"email",id:"email",onChange:function(t){return e.setState({email:t.target.value})}})]}),Object(x.jsxs)("div",{className:"auth-screen__form__element",children:[Object(x.jsx)("label",{htmlFor:"password",children:"Password:"}),Object(x.jsx)("input",{type:"password",required:!0,placeholder:"Enter password",name:"password",id:"password",onChange:function(t){return e.setState({password:t.target.value})}})]}),Object(x.jsxs)("div",{className:"auth-screen__form__element",children:[Object(x.jsx)("input",{type:"submit",name:"submit",value:"Sign in",onClick:function(t){return e.signInHandler(t)}}),Object(x.jsx)("div",{className:"auth-screen__form__error",children:this.state.error&&"".concat(this.state.error)})]}),Object(x.jsxs)("div",{children:[Object(x.jsxs)("span",{className:"auth-screen__subtext",children:["Do not have an account?",Object(x.jsx)(f.a,{to:"/auth/signup",children:"Sign up"})]}),Object(x.jsxs)("span",{className:"auth-screen__subtext",children:["Forgot my password",Object(x.jsx)(f.a,{to:"/auth/forgotpass",children:"Restore"})]})]})]})})}}]),a}(s.a.Component),w=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,s=new Array(r),n=0;n<r;n++)s[n]=arguments[n];return(e=t.call.apply(t,[this].concat(s))).state={username:null,email:null,password:null,confirmPassword:null,error:null},e.signUpHandler=function(){var t=Object(b.a)(j.a.mark((function t(a){var r,s,n;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),r={headers:{"Content-Type":"application/json"}},e.state.password===e.state.confirmPassword){t.next=4;break}return t.abrupt("return",e.setState({password:null,confirmPassword:null,error:"Passwords do not match"}));case 4:return t.prev=4,t.next=7,d.a.post("/api/auth/signup",{username:e.state.username,email:e.state.email,password:e.state.password},r);case 7:s=t.sent,n=s.data,localStorage.setItem("authtoken",n.token),v.push("/"),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(4),e.setState({error:t.t0.response.data.error});case 16:case"end":return t.stop()}}),t,null,[[4,13]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(i.a)(a,[{key:"render",value:function(){var e=this;return Object(x.jsx)("div",{className:"auth-screen",children:Object(x.jsxs)("form",{className:"auth-screen__form",onSubmit:this.signUpHandler,children:[Object(x.jsx)("h3",{className:"auth-screen__title",children:"Sign up"}),Object(x.jsxs)("div",{className:"auth-screen__form__element",children:[Object(x.jsx)("label",{htmlFor:"username",children:"Username:"}),Object(x.jsx)("input",{type:"text",required:!0,placeholder:"Enter username",name:"username",id:"username",onChange:function(t){return e.setState({username:t.target.value})}})]}),Object(x.jsxs)("div",{className:"auth-screen__form__element",children:[Object(x.jsx)("label",{htmlFor:"email",children:"Email:"}),Object(x.jsx)("input",{type:"email",required:!0,placeholder:"Enter email",name:"email",id:"email",onChange:function(t){return e.setState({email:t.target.value})}})]}),Object(x.jsxs)("div",{className:"auth-screen__form__element",children:[Object(x.jsx)("label",{htmlFor:"password",children:"Password:"}),Object(x.jsx)("input",{type:"password",required:!0,placeholder:"Enter password",name:"password",id:"password",onChange:function(t){return e.setState({password:t.target.value})}})]}),Object(x.jsxs)("div",{className:"auth-screen__form__element",children:[Object(x.jsx)("label",{htmlFor:"confirmPassword",children:"Confirm password:"}),Object(x.jsx)("input",{type:"password",required:!0,placeholder:"Confirm password",name:"confirmPassword",id:"confirmPassword",onChange:function(t){return e.setState({confirmPassword:t.target.value})}})]}),Object(x.jsxs)("div",{className:"auth-screen__form__element",children:[Object(x.jsx)("input",{type:"submit",name:"submit",value:"Sign up",onClick:this.signUpHandler}),Object(x.jsx)("div",{className:"auth-screen__form__error",children:this.state.error&&"".concat(this.state.error)})]}),Object(x.jsxs)("span",{className:"auth-screen__subtext",children:["Already have an account?",Object(x.jsx)(f.a,{to:"/auth/signin",children:"Sign in"})]})]})})}}]),a}(s.a.Component),g=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,s=new Array(r),n=0;n<r;n++)s[n]=arguments[n];return(e=t.call.apply(t,[this].concat(s))).state={email:null,error:null,success:null},e.forgotPassHandler=function(){var t=Object(b.a)(j.a.mark((function t(a){var r,s,n;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),r={header:{"Content-Type":"application/json"}},t.prev=2,t.next=5,d.a.post("/api/auth/forgotpass",{email:e.state.email},r);case 5:s=t.sent,n=s.data,e.setState({success:n.data,error:null}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(2),e.setState({error:t.t0.response.data.error,email:null,success:null});case 13:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(i.a)(a,[{key:"render",value:function(){var e=this;return Object(x.jsx)("div",{className:"auth-screen",children:Object(x.jsxs)("form",{className:"auth-screen__form",onSubmit:function(t){return e.forgotPassHandler(t)},children:[Object(x.jsx)("h3",{className:"auth-screen__title",children:"Forgot password"}),Object(x.jsxs)("div",{className:"auth-screen__form__element",children:[Object(x.jsx)("label",{htmlFor:"email",children:"Email:"}),Object(x.jsx)("input",{type:"email",required:!0,placeholder:"Enter email",name:"email",id:"email",onChange:function(t){return e.setState({email:t.target.value})}})]}),Object(x.jsxs)("div",{className:"auth-screen__form__element",children:[Object(x.jsx)("input",{type:"submit",name:"submit",value:"Send an email",onClick:function(t){return e.forgotPassHandler(t)}}),Object(x.jsxs)("div",{className:"auth-screen__form__error",children:[this.state.error&&"Error: ".concat(this.state.error),this.state.success&&"Success: ".concat(this.state.success)]})]})]})})}}]),a}(s.a.Component),y=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,s=new Array(r),n=0;n<r;n++)s[n]=arguments[n];return(e=t.call.apply(t,[this].concat(s))).state={password:"",confirmPassword:"",success:"",error:""},e.resetPasswordHandler=function(){var t=Object(b.a)(j.a.mark((function t(a){var r,s,n;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),r={headers:{"Content-Type":"application/json"}},e.state.password===e.state.confirmPassword){t.next=4;break}return t.abrupt("return",e.setState({error:"Passwords do not match"}));case 4:return t.prev=4,t.next=7,d.a.put("/api/auth/resetpass/".concat(e.props.match.params.resetToken),{password:e.state.password},r);case 7:s=t.sent,n=s.data,console.log("data: ".concat(n.data)),e.setState({error:"",success:n.data}),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(4),console.log(t.t0),e.setState({error:t.t0.response.data.error,success:""});case 17:case"end":return t.stop()}}),t,null,[[4,13]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(i.a)(a,[{key:"render",value:function(){var e=this;return Object(x.jsx)("div",{className:"auth-screen",children:Object(x.jsxs)("form",{className:"auth-screen__form",onSubmit:this.resetPasswordHandler,children:[Object(x.jsx)("h3",{className:"auth-screen__title",children:"Enter new password"}),Object(x.jsxs)("div",{className:"auth-screen__form__element",children:[Object(x.jsx)("label",{htmlFor:"password",children:"Password:"}),Object(x.jsx)("input",{type:"password",required:!0,placeholder:"Enter password",name:"password",id:"password",onChange:function(t){return e.setState({password:t.target.value})}})]}),Object(x.jsxs)("div",{className:"auth-screen__form__element",children:[Object(x.jsx)("label",{htmlFor:"confirmPassword",children:"Confirm password:"}),Object(x.jsx)("input",{type:"password",required:!0,placeholder:"Confirm password",name:"confirmPassword",id:"confirmPassword",onChange:function(t){return e.setState({confirmPassword:t.target.value})}})]}),Object(x.jsxs)("div",{className:"auth-screen__form__element",children:[Object(x.jsx)("input",{type:"submit",name:"submit",value:"Update",onClick:this.resetPasswordHandler}),Object(x.jsx)("div",{className:"auth-screen__form__error",children:this.state.error&&"Error: ".concat(this.state.error)}),this.state.success&&Object(x.jsxs)("span",{className:"auth-screen__subtext",children:["Success: ".concat(this.state.success),Object(x.jsx)(f.a,{to:"/auth/signin",children:"Sign in"})]})]})]})})}}]),a}(s.a.Component),S=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,s=new Array(r),n=0;n<r;n++)s[n]=arguments[n];return(e=t.call.apply(t,[this].concat(s))).state={privateData:null,error:null},e.fetchPrivateData=Object(b.a)(j.a.mark((function t(){var a,r,s;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={headers:{"Content-Type":"application/json",authorization:"Bearer ".concat(localStorage.getItem("authtoken"))}},t.prev=1,t.next=4,d.a.get("/api/private",a);case 4:r=t.sent,s=r.data,e.setState({privateData:s.data}),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),localStorage.removeItem("authtoken"),e.setState({error:"You are not authorized, please sign in"});case 13:case"end":return t.stop()}}),t,null,[[1,9]])}))),e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){localStorage.getItem("authtoken")||v.push("/auth/signin"),this.fetchPrivateData()}},{key:"signOutHandler",value:function(){localStorage.removeItem("authtoken"),v.push("/auth/signin")}},{key:"render",value:function(){return Object(x.jsxs)("div",{children:[Object(x.jsx)("p",{children:"Main page"}),this.state.privateData&&Object(x.jsxs)("div",{children:[Object(x.jsx)("p",{children:"ID of user: ".concat(this.state.privateData._id)}),Object(x.jsx)("p",{children:"username: ".concat(this.state.privateData.username)}),Object(x.jsx)("p",{children:"email: ".concat(this.state.privateData.email)}),Object(x.jsx)("button",{onClick:this.signOutHandler,children:"Sign out"})]}),this.state.error&&"error is: ".concat(this.state.error)]})}}]),a}(s.a.Component),k=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return Object(x.jsx)(p.b,{history:v,children:Object(x.jsx)("div",{className:"app",children:Object(x.jsxs)(p.c,{children:[Object(x.jsx)(p.a,{exact:!0,path:"/",component:S}),Object(x.jsx)(p.a,{exact:!0,path:"/auth/signin",component:_}),Object(x.jsx)(p.a,{exact:!0,path:"/auth/signup",component:w}),Object(x.jsx)(p.a,{exact:!0,path:"/auth/forgotpass",component:g}),Object(x.jsx)(p.a,{exact:!0,path:"/auth/resetpass/:resetToken",component:y})]})})})}}]),a}(s.a.Component),N=a(39),C=a(17),P=a(38),D=Object(C.c)({auth:function(){return 123}}),E=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||C.d,H=Object(C.e)(D,E(Object(C.a)(P.a)));c.a.render(Object(x.jsx)(N.a,{store:H,children:Object(x.jsx)(k,{})}),document.querySelector("#root"))}},[[69,1,2]]]);
//# sourceMappingURL=main.9c3b854d.chunk.js.map